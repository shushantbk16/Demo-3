"use strict";var o=require("react");const d=(e,t)=>{let i;return(...s)=>{i&&clearTimeout(i),i=setTimeout(()=>{e(...s),i=null},t)}},a=(e,t)=>{const i=document.createElement(e);return i.classList.add(t),i};class c{constructor(t){var i;this.slideClass=document.querySelector(`.${t.slideClass}`),this.slide=(i=this.slideClass)==null?void 0:i.querySelector(".slider-wrapper"),this.dist={finalPosition:0,startX:0,moviment:0,movePosition:0},this.infinite=t.infinite||!1,this.bullets=t.bullets,this.arrowsNav=t.arrowsNav,this.callback=t.callback,this.animation=t.animation,this.activeClass="active",this.slideArray=[],this.index={prev:0,active:0,next:0},this.animation&&this.slideClass.classList.add(`animation-${this.animation}`),this.slide&&this.slideClass&&(this.bindEvents(),this.transition(!0),this.config(),this.indexNav(0),this.changeSlide(this.index.active),this.changeActiveClass(),this.resizeEvent(),this.keyNav())}transition(t){this.slide.style.transition=t?"transform .3s":""}move(t){this.dist.movePosition=t,this.slide.style.transform=`translate3d(${t}px, 0, 0)`}updatePosition(t){return this.dist.moviment=(this.dist.startX-t)*1.6,this.dist.finalPosition-this.dist.moviment}onStart(t){let i;t.type==="mousedown"?(t.preventDefault(),this.dist.startX=t.clientX,i="mousemove"):(this.dist.startX=t.changedTouches[0].clientX,i="touchmove"),this.transition(!1),this.slideClass.addEventListener(i,this.onMove)}onMove(t){const i=t.type==="mousemove"?t.clientX:t.changedTouches[0].clientX,s=this.updatePosition(i);this.move(s)}onEnd(t){const i=t.type==="mouseup"?"mousemove":"touchmove";this.slideClass.removeEventListener(i,this.onMove),this.dist.finalPosition=this.dist.movePosition,this.transition(!0),this.changeSlideOnEnd()}changeSlideOnEnd(){this.dist.moviment>120&&this.index.next!==void 0?this.activeNext():this.dist.moviment<-120&&this.index.prev!==void 0?this.activePrev():this.changeSlide(this.index.active)}addEvents(){this.slideClass.addEventListener("mousedown",this.onStart),this.slideClass.addEventListener("touchstart",this.onStart),this.slideClass.addEventListener("mouseup",this.onEnd),this.slideClass.addEventListener("touchend",this.onEnd)}slidePosition(t){const i=(this.slideClass.offsetWidth-t.offsetWidth)/2;return-(t.offsetLeft-i)}config(){this.slideArray=[...this.slide.children].map(t=>({position:this.slidePosition(t),element:t}))}indexNav(t){const i=this.slideArray.length-1;this.infinite?this.index={prev:t?t-1:i,active:t,next:t===i?0:t+1}:this.index={prev:t?t-1:0,active:t,next:t===i?0:t+1}}changeSlide(t){const i=this.slideArray[t];this.move(i.position),this.indexNav(t),this.dist.finalPosition=i.position,this.changeActiveClass();const s=new CustomEvent("changed");this.slide.dispatchEvent(s)}changeActiveClass(){this.slideArray.forEach(({element:t})=>t.classList.remove(this.activeClass)),this.slideArray[this.index.active].element.classList.add(this.activeClass)}activePrev(){this.index.prev!==void 0&&this.changeSlide(this.index.prev)}activeNext(){this.index.next!==void 0&&this.changeSlide(this.index.next)}onResize(){setTimeout(()=>{this.config(),this.changeSlide(this.index.active)},500)}resizeEvent(){window.addEventListener("resize",this.onResize)}keyNav(){document.addEventListener("keyup",t=>{t.key==="ArrowRight"?this.activeNext():t.key==="ArrowLeft"&&this.activePrev()})}bindEvents(){this.onStart=this.onStart.bind(this),this.onMove=this.onMove.bind(this),this.onEnd=this.onEnd.bind(this),this.activePrev=this.activePrev.bind(this),this.activeNext=this.activeNext.bind(this),this.onResize=d(this.onResize.bind(this),150),this.keyNav=this.keyNav.bind(this)}init(){return this.slide&&this.slideClass&&this.addEvents(),this}}class v extends c{constructor(t){super(t),this.activeNavClass="active",this.slide&&this.slideClass&&(this.addEvents(),this.bullets&&this.createBullets(),this.arrowsNav&&this.appendArrows(),this.slide.addEventListener("changed",()=>{this.callback&&this.callback(),this.removeClassBulletCurrent(),this.addClassBulletCurrent(this.controlChildrens[this.index.active])}))}createArrows(){this.prevEl=a("button","slider-nav-prev"),this.nextEl=a("button","slider-nav-next"),this.navigationContainer=a("div","slider-nav"),this.prevEl.innerText="Anterior",this.nextEl.innerText="Pr\xF3ximo"}addEventArrows(){this.prevEl.addEventListener("click",this.activePrev),this.nextEl.addEventListener("click",this.activeNext)}appendArrows(){this.createArrows(),this.addEventArrows(),this.navigationContainer.appendChild(this.prevEl),this.navigationContainer.appendChild(this.nextEl),this.slideClass.appendChild(this.navigationContainer)}createBullets(){const t=a("ul","slider-bullets");this.slideArray.forEach((i,s)=>{const n=a("li","slider-bullets-item");n.innerText=s+1,n.addEventListener("click",h=>{h.preventDefault(),this.removeClassBulletCurrent(),this.addClassBulletCurrent(h.currentTarget),this.changeSlide(s)}),t.appendChild(n)}),this.control=t,this.controlChildrens=[...this.control.children],this.slideClass.appendChild(t),this.addClassBulletCurrent(this.controlChildrens[this.index.active])}addClassBulletCurrent(t){t.classList.add(this.activeNavClass)}removeClassBulletCurrent(){[...this.control.children].forEach(t=>t.classList.remove(this.activeNavClass))}}const u=({slideClass:e,children:t,infinite:i,bullets:s,arrowsNav:n,callback:h,animation:r})=>(o.useEffect(()=>{const l={slideClass:e,infinite:i,bullets:s,arrowsNav:n,callback:h,animation:r};new v(l).init()},[]),t);module.exports=u;
